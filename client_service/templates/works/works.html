{% extends 'base/base.html' %}

{% block title %}–ù–∞—à–∏ —Ä–∞–±–æ—Ç—ã{% endblock %}

{% block content %}

<section class="section">
    <div class="container">
        <!-- Enhanced Header with Statistics -->
        <div class="works-hero">
            <div class="section-header">
                <div>
                    <h1 class="section-title">–ù–∞—à–∏ —Ä–∞–±–æ—Ç—ã</h1>
                    <p class="section-subtitle">–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –º–µ–±–µ–ª–∏ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã</p>
                </div>
                <div class="works-stats">
                    <div class="stat-item">
                        <span class="stat-number">{{ works|length }}+</span>
                        <span class="stat-label">–ø—Ä–æ–µ–∫—Ç–æ–≤</span>
                    </div>
                </div>
            </div>

            <!-- Filter Tabs -->
            <div class="filter-tabs">
                <button class="filter-tab active" data-filter="all">
                    <span class="tab-icon">üè†</span>
                    <span>–í—Å–µ —Ä–∞–±–æ—Ç—ã</span>
                </button>
                <button class="filter-tab" data-filter="kitchen">
                    <span class="tab-icon">üç≥</span>
                    <span>–ö—É—Ö–Ω–∏</span>
                </button>
                <button class="filter-tab" data-filter="wardrobe">
                    <span class="tab-icon">üëî</span>
                    <span>–®–∫–∞—Ñ—ã</span>
                </button>
                <button class="filter-tab" data-filter="table">
                    <span class="tab-icon">ü™ë</span>
                    <span>–°—Ç–æ–ª—ã</span>
                </button>
                <button class="filter-tab" data-filter="cabinet">
                    <span class="tab-icon">üìö</span>
                    <span>–¢—É–º–±—ã</span>
                </button>
            </div>
        </div>

        <!-- Enhanced Portfolio Grid -->
        <div class="portfolio-enhanced-grid" id="portfolioGrid">
            {% for work in works %}
            <article class="portfolio-card" data-category="{{ work.work_type }}">
                <div class="card-image-container">
                    <img src="{{ work.image.url }}" alt="{{ work.title }}" class="portfolio-image" loading="lazy">
                    <div class="image-overlay">
                        <button class="quick-view-btn" onclick="quickView('{{ work.id }}')">
                            <span class="btn-icon">üëÅÔ∏è</span>
                            <span>–ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä</span>
                        </button>
                    </div>
                    <div class="card-badges">
                        <span class="badge badge-category">{{ work.get_work_type_display }}</span>
                        {% if work.is_featured %}
                        <span class="badge badge-featured">‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º</span>
                        {% endif %}
                    </div>
                </div>

                <div class="card-content">
                    <div class="card-main-content">
                        <h3 class="card-title">{{ work.title|truncatewords:3 }}</h3>
                        <p class="card-description">{{ work.description|truncatewords:16|default:"–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è" }}</p>

                        <div class="card-details">
                            {% if work.material %}
                            <div class="detail-item">
                                <span class="detail-icon">ü™µ</span>
                                <span class="detail-text">{{ work.material }}</span>
                            </div>
                            {% endif %}
                            <div class="detail-item">
                                <span class="detail-icon">üìÖ</span>
                                <span class="detail-text">{{ work.date|date:"M Y" }}</span>
                            </div>
                        </div>
                    </div>

                    <div class="card-footer">
                        <div class="price-section">
                            <span class="price-label">–°—Ç–æ–∏–º–æ—Å—Ç—å:</span>
                            <span class="price-value">{{ work.price }}</span>
                            <span class="price-unit">{{ work.currency|upper }}</span>
                        </div>
                        <a href="{% url 'client_service:work_detail' work.id %}" class="view-btn">
                            <span>–ü–æ–¥—Ä–æ–±–Ω–µ–µ</span>
                            <span class="btn-arrow">‚Üí</span>
                        </a>
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>

        <!-- Call to Action Section -->
        <div class="works-cta">
            <div class="cta-content">
                <h3>–•–æ—Ç–∏—Ç–µ –∑–∞–∫–∞–∑–∞—Ç—å –ø–æ—Ö–æ–∂—É—é –º–µ–±–µ–ª—å?</h3>
                <p>–ù–∞—à–∏ –º–∞—Å—Ç–µ—Ä–∞ —Å–æ–∑–¥–∞–¥—É—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–∑–¥–µ–ª–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—Å</p>
                <button class="btn btn-primary" onclick="openConsultationModal()">
                    <span class="btn-icon">üí¨</span>
                    <span>–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é</span>
                </button>
            </div>
        </div>
    </div>
</section>

<section id="contacts" class="section container">
    <div class="section-header">
        <div>
            <div class="section-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
            <div class="section-sub">–í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—ã–π –¥–ª—è –≤–∞—Å —Ñ–∏–ª–∏–∞–ª</div>
        </div>
    </div>
    <div class="branches">
        {% if contacts %}
        {% for contact in contacts %}
        <div class="branch">
            <div class="section-sub" style="color:#cfe3ff; font-weight:700;">{{ contact.branch_name }}</div>
            <div class="contact_row">üïë {{ contact.start_time }} - {{ contact.end_time }} PM</div>
            <div class="contact-row">üìû {{ contact.phone }}</div>
            <div class="contact-row">üìß {{ contact.email }}</div>
            <div class="contact-row">üìç {{ contact.address }} | {{ contact.get_country_display }}</div>
            <div class="contact-row"><a href="{{ contact.whatsapp }}">üí¨ WhatsApp</a> ¬∑ <a href="{{ contact.instagram }}">üì∑ Instagram</a></div>
        </div>
        {% endfor %}
        {% else %}
        <h1>–ù–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤!</h1>
        {% endif %}
    </div>
</section>

{% endblock %}