{% extends 'base/base.html' %}
{% load i18n %}

{% block title %}{% trans 'Our Works' %}{% endblock %}

{% block content %}

<section class="section">
    <div class="container">
        <!-- Enhanced Header with Statistics -->
        <div class="works-hero">
            <div class="section-header">
                <div>
                    <h1 class="section-title">{% trans 'Our Works' %}</h1>
                    <p class="section-subtitle">{% trans 'Portfolio of unique handmade furniture' %}</p>
                </div>
                <div class="works-stats">
                    <div class="stat-item">
                        <span class="stat-number">{{ works|length }}+</span>
                        <span class="stat-label">{% trans 'projects' %}</span>
                    </div>
                </div>
            </div>

            <!-- Filter Tabs -->
            <div class="filter-tabs">
                <button class="filter-tab active" data-filter="all">
                    <span class="tab-icon">ğŸ </span>
                    <span>{% trans 'All Works' %}</span>
                </button>
            </div>
        </div>

        <!-- Enhanced Portfolio Grid -->
        <div class="portfolio-enhanced-grid" id="portfolioGrid">
            {% for work in works %}
            <article class="portfolio-card" data-category="{{ work.work_type }}">
                <div class="card-image-container">
                    <img src="{{ work.image.url }}" alt="{{ work.title }}" class="portfolio-image{% if work.show_full_image %} full-view{% endif %}" loading="lazy">
                    <div class="image-overlay">
                        <button class="quick-view-btn" onclick="quickView('{{ work.id }}')">
                            <span class="btn-icon">ğŸ‘ï¸</span>
                            <span>{% trans 'Quick View' %}</span>
                        </button>
                    </div>
                    <div class="card-badges">
                        <span class="badge badge-category">{{ work.get_work_type_display }}</span>
                        {% if work.is_featured %}
                        <span class="badge badge-featured">â­ {% trans 'Recommended' %}</span>
                        {% endif %}
                    </div>
                </div>

                <div class="card-content">
                    <div class="card-footer">
                        <a href="{% url 'client_service:work_detail' work.id %}" class="view-btn">
                            <span>{% trans 'More details' %}</span>
                            <span class="btn-arrow">â†’</span>
                        </a>
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>

        <!-- Call to Action Section -->
        <div class="works-cta">
            <div class="cta-content">
                <h3>{% trans 'Want to order similar furniture?' %}</h3>
                <p>{% trans 'Our masters will create a unique piece specially for you' %}</p>
                <button class="btn btn-primary" onclick="openConsultationModal()">
                    <span class="btn-icon">ğŸ’¬</span>
                    <span>{% trans 'Get consultation' %}</span>
                </button>
            </div>
        </div>
    </div>
</section>

<section id="contacts" class="section container">
    <div class="section-header">
        <div>
            <div class="section-title">{% trans 'Contacts' %}</div>
            <div class="section-sub">{% trans 'Choose a convenient branch for you' %}</div>
        </div>
    </div>
    <div class="branches">
        {% if contacts %}
        {% for contact in contacts %}
        <div class="branch">
            <div class="section-sub" style="font-weight:700;">{{ contact.branch_name }}</div>
            
            <!-- Opening Hours -->
            {% if contact.get_all_opening_hours %}
            <div class="opening-hours-section">
                <h4>{% trans 'Opening Hours' %}</h4>
                <div class="hours-container">
                    <div class="hours-column">
                        <div class="hours-row">
                            <span class="day">{% trans 'Mo' %}</span>
                            <span class="time">{{ contact.monday_hours }}</span>
                        </div>
                        <div class="hours-row">
                            <span class="day">{% trans 'Tu' %}</span>
                            <span class="time">{{ contact.tuesday_hours }}</span>
                        </div>
                        <div class="hours-row">
                            <span class="day">{% trans 'We' %}</span>
                            <span class="time">{{ contact.wednesday_hours }}</span>
                        </div>
                        <div class="hours-row">
                            <span class="day">{% trans 'Th' %}</span>
                            <span class="time">{{ contact.thursday_hours }}</span>
                        </div>
                        <div class="hours-row">
                            <span class="day">{% trans 'Fr' %}</span>
                            <span class="time">{{ contact.friday_hours }}</span>
                        </div>
                    </div>
                    <div class="hours-column">
                        <div class="hours-row">
                            <span class="day">{% trans 'Sa' %}</span>
                            <span class="time">{{ contact.saturday_hours }}</span>
                        </div>
                        <div class="hours-row">
                            <span class="day">{% trans 'Su' %}</span>
                            <span class="time">{{ contact.sunday_hours }}</span>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
            
            <div class="contact-row">ğŸ“ {{ contact.phone }}</div>
            <div class="contact-row">ğŸ“§ {{ contact.email }}</div>
            <div class="contact-row">ğŸ“ {{ contact.address }} | {{ contact.get_country_display }}</div>
            <div class="contact-row"><a href="{{ contact.whatsapp }}">ğŸ’¬ {% trans 'WhatsApp' %}</a> Â· <a href="{{ contact.instagram }}">ğŸ“· {% trans 'Instagram' %}</a></div>
            {% if contact.address %}
            <div class="contact-map">
                <a href="https://www.google.com/maps/search/?api=1&query={{ contact.address|urlencode }} {{ contact.get_country_display|urlencode }}" target="_blank" class="map-link">
                    <div class="mini-map"
                         style="background-image: url('https://maps.googleapis.com/maps/api/staticmap?center={{ contact.address|urlencode }} {{ contact.get_country_display|urlencode }}&zoom=15&size=300x200&key=AIzaSyCV338EzjXB46qlz9tV5qCipoeTVvIqo4I');">
                        <div class="map-marker">ğŸ“</div>
                    </div>
                    <div class="map-overlay">
                        <span class="map-text">{% trans 'View on Google Maps' %}</span>
                    </div>
                </a>
            </div>
            {% endif %}
        </div>
        {% endfor %}
        {% else %}
        <h1>{% trans 'No contacts!' %}</h1>
        {% endif %}
    </div>
</section>

{% endblock %}