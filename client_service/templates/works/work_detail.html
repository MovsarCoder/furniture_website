{% extends 'base/base.html' %}
{% load i18n %}
{% load static %}

{% block title %}{{ work.title }} - B'Mass{% endblock %}

{% block content %}

<section class="product-detail-section">
    <div class="container">
        <!-- Breadcrumb Navigation -->
        <nav class="breadcrumb-nav" aria-label="breadcrumb">
            <a href="{% url 'client_service:index' %}" class="breadcrumb-link">{% trans 'Home' %}</a>
            <span class="breadcrumb-separator">/</span>
            <a href="{% url 'client_service:portfolio' %}" class="breadcrumb-link">{% trans 'Portfolio' %}</a>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-current">{{ work.title }}</span>
        </nav>

        <div class="product-detail-layout">
            <!-- Left: Product Image -->
            <div class="product-image-section">
                <div class="product-image-wrapper">
                    {% if work.image %}
                    <img src="{{ work.image.url }}" alt="{{ work.title }}" class="product-main-image" loading="lazy">
                    <button class="image-zoom-btn" aria-label="{% trans 'Zoom image' %}" onclick="openImageModal('{{ work.image.url }}')">
                        <svg style='color: #fff' width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </button>
                    {% endif %}
                </div>
            </div>


            <!-- Right: Product Information -->
            <div class="product-info-section">

                <!-- Product Details Button -->
                <button class="product-details-toggle" onclick="toggleProductDetails()">
                    <span>{% trans 'Product Details' %}</span>
                    <svg class="toggle-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2.5">
                        <path d="M5 7.5l5 5 5-5"/>
                    </svg>
                </button>

                <!-- Product Header -->
                <div class="product-header">
                    <div class="product-category-badge">
                        {% if work.category %}{{ work.category.title }}{% endif %}
                    </div>
                    <h1 class="product-title">{{ work.title }}</h1>
                    {% if work.description %}
                    <p class="product-subtitle">{{ work.description|truncatewords:30 }}</p>
                    {% endif %}

                    {% if work.width and work.height and work.depth %}
                    <div class="product-dimensions-inline">
                        <span class="dimensions-label">{% trans 'Width / Height / Depth' %}:</span>
                        <span class="dimensions-value">
                            {{ work.width|floatformat:0 }} / {{ work.height|floatformat:0 }} / {{ work.depth|floatformat:0 }} {% trans 'cm' %}
                        </span>
                    </div>
                    {% endif %}
                </div>

                <!-- Price Section -->
                <div class="product-price-section">
                    {% if work.price %}
                    <div class="price-display">
                        <span class="price-value">{{ work.price|floatformat:0 }}</span>
                        <span class="price-currency">{{ work.get_currency_display }}</span>
                    </div>
                    <p class="price-note">{% trans 'Final cost is calculated individually' %}</p>
                    {% else %}
                    <div class="price-display">
                        <span class="price-value request">{% trans 'By request' %}</span>
                    </div>
                    <p class="price-note">{% trans 'The final cost is calculated individually after consultation' %}</p>
                    {% endif %}
                </div>

                <!-- Quick Info Badges -->
                <div class="product-badges">
                    {% if work.material %}
                    <div class="info-badge">
                        <span class="badge-icon">ü™µ</span>
                        <span class="badge-text">{{ work.material }}</span>
                    </div>
                    {% endif %}
                    {% if work.work_type %}
                    <div class="info-badge">
                        <span class="badge-icon">üè∑Ô∏è</span>
                        <span class="badge-text">{{ work.get_work_type_display }}</span>
                    </div>
                    {% endif %}
                    {% if work.status %}
                    <div class="info-badge status-badge">
                        <span class="badge-icon">‚úì</span>
                        <span class="badge-text">{{ work.get_status_display }}</span>
                    </div>
                    {% endif %}
                </div>

                <!-- Action Buttons -->
                <div class="product-actions">
                    <button class="btn-primary-large" onclick="openConsultationModal()">
                        <span class="btn-icon">üì©</span>
                        <span>{% trans 'Order consultation' %}</span>
                    </button>
                    <a href="{% url 'client_service:portfolio' %}" class="btn-secondary-large">
                        <span>‚Üê {% trans 'Back to catalog' %}</span>
                    </a>
                </div>

            </div>
        </div>

        <!-- Product Details Modal/Sidebar -->
        <div class="product-details-modal" id="productDetailsModal">
            <div class="modal-backdrop" onclick="toggleProductDetails()"></div>
            <div class="modal-content-wrapper">
                <div class="modal-header">
                    <h2 class="modal-title">{% trans 'Product Details' %}</h2>
                    <button class="modal-close-btn" onclick="toggleProductDetails()" aria-label="{% trans 'Close' %}">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>

                <div class="modal-body">
                    <!-- General Information -->
                    <div class="details-section">
                        <h3 class="section-title">{% trans 'General Information' %}</h3>
                        <ul class="details-list">
                            {% if work.width and work.height and work.depth %}
                            <li class="detail-item">
                                <span class="detail-label">{% trans 'Width / Height / Depth' %}:</span>
                                <span class="detail-value">
                                    {{ work.width|floatformat:0 }} / {{ work.height|floatformat:0 }} / {{ work.depth|floatformat:0 }} {% trans 'cm' %}
                                </span>
                            </li>
                            {% endif %}
                            {% if work.category %}
                            <li class="detail-item">
                                <span class="detail-label">{% trans 'Category' %}:</span>
                                <span class="detail-value">{{ work.category.title }}</span>
                            </li>
                            {% endif %}
                            {% if work.material %}
                            <li class="detail-item">
                                <span class="detail-label">{% trans 'Material' %}:</span>
                                <span class="detail-value">{{ work.material }}</span>
                            </li>
                            {% endif %}
                            {% if work.work_type %}
                            <li class="detail-item">
                                <span class="detail-label">{% trans 'Type' %}:</span>
                                <span class="detail-value">{{ work.get_work_type_display }}</span>
                            </li>
                            {% endif %}
                            {% if work.date %}
                            <li class="detail-item">
                                <span class="detail-label">{% trans 'Production Date' %}:</span>
                                <span class="detail-value">{{ work.date|date:"d.m.Y" }}</span>
                            </li>
                            {% endif %}
                            {% if work.country %}
                            <li class="detail-item">
                                <span class="detail-label">{% trans 'Country' %}:</span>
                                <span class="detail-value">{{ work.get_country_display }}</span>
                            </li>
                            {% endif %}
                        </ul>
                    </div>

                    <!-- Product Advantages -->
                    <div class="details-section">
                        <h3 class="section-title">{% trans 'Product Advantages' %}</h3>
                        <ul class="advantages-list">
                            <li class="advantage-item">
                                <span class="advantage-icon">‚úì</span>
                                <span>{% trans 'High quality materials' %}</span>
                            </li>
                            <li class="advantage-item">
                                <span class="advantage-icon">‚úì</span>
                                <span>{% trans 'Individual design' %}</span>
                            </li>
                            <li class="advantage-item">
                                <span class="advantage-icon">‚úì</span>
                                <span>{% trans 'Professional assembly' %}</span>
                            </li>
                            <li class="advantage-item">
                                <span class="advantage-icon">‚úì</span>
                                <span>{% trans 'Warranty included' %}</span>
                            </li>
                        </ul>
                    </div>

                    <!-- Delivery & Care -->
                    <div class="details-section">
                        <h3 class="section-title">{% trans 'Delivery & Care' %}</h3>
                        <div class="delivery-info">
                            <div class="info-item">
                                <span class="info-icon">üöö</span>
                                <div class="info-content">
                                    <strong>{% trans 'Delivery' %}:</strong>
                                    <span>{% trans 'From 2 to 4 weeks throughout the country' %}</span>
                                </div>
                            </div>
                            <div class="info-item">
                                <span class="info-icon">üì¶</span>
                                <div class="info-content">
                                    <strong>{% trans 'Packaging' %}:</strong>
                                    <span>{% trans 'Carefully packed in protective materials' %}</span>
                                </div>
                            </div>
                            <div class="info-item">
                                <span class="info-icon">üîß</span>
                                <div class="info-content">
                                    <strong>{% trans 'Assembly' %}:</strong>
                                    <span>{% trans 'Professional assembly by our masters' %}</span>
                                </div>
                            </div>
                            <div class="info-item">
                                <span class="info-icon">üõ°Ô∏è</span>
                                <div class="info-content">
                                    <strong>{% trans 'Warranty' %}:</strong>
                                    <span>{% trans 'Official 2-year warranty' %}</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Full Description -->
                    {% if work.description %}
                    <div class="details-section">
                        <h3 class="section-title">{% trans 'Description' %}</h3>
                        <div class="description-content">
                            <p>{{ work.description }}</p>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Image Modal -->
        <div class="image-modal" id="imageModal" onclick="closeImageModal()">
            <div class="image-modal-content">
                <button class="image-modal-close" onclick="closeImageModal()" aria-label="{% trans 'Close' %}">√ó</button>
                <img id="modalImage" src="" alt="{{ work.title }}">
            </div>
        </div>
    </div>
</section>

<script src="{% static 'js/work_detail.js' %}"></script>

{% endblock %}
