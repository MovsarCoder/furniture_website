{% extends "base/base.html" %}
{% load i18n %}
{% load static %}

{% block title %}
{% trans 'Home' %} - B'Mass
{% endblock %}

{% block content %}

{% if carousel_photos %}
<section id="home" class="hero-stack">
    <div class="photo-carousel full-bleed animate-fade-in">
        <div class="carousel-shell" data-carousel="home">
            <div class="carousel-viewport">
                <div class="carousel-track">
                    {% for photo in carousel_photos %}
                    <div class="carousel-slide">
                        <img src="{{ photo.image.url }}" alt="{{ photo.title }}" loading="lazy">
                        <div class="carousel-overlay">
                            <div class="carousel-title">{{ photo.title }}</div>
                            {% if photo.caption %}
                            <div class="carousel-caption">{{ photo.caption }}</div>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <div class="carousel-controls">
                <div class="carousel-dots" data-carousel-dots></div>
            </div>
        </div>
    </div>

    <div class="hero-intro hero-intro-overlay">
        <div class="hero-intro-inner">
            <div class="hero-text">
                <p class="hero-title">
                    {% trans 'We create furniture' %} -
                    {% trans 'dreams' %}
                    {% trans 'for your home' %}
                </p>
                <p class="hero-description" style="animation-delay: 0.3s;">
                    {% trans 'Design and manufacture of unique furniture for your interior. From idea to implementation ‚Äî 100% quality and attention to detail.' %}
                </p>
            </div>
        </div>
    </div>
</section>
{% else %}
<section id="home" class="hero-intro">
    <div class="hero-intro-inner">
        <div class="hero-text">
            <p class="hero-title" style="margin-top: -30px;">
                {% trans 'We create furniture' %}
                {% trans 'dreams' %}
                {% trans 'for your home' %}
            </p>
            <p class="hero-description" style="animation-delay: 0.3s;">
                {% trans 'Design and manufacture of unique furniture for your interior. From idea to implementation ‚Äî 100% quality and attention to detail.' %}
            </p>
        </div>
    </div>
</section>
{% endif %}

<section id="portfolio" class="section container animate-fade-in">
    <div class="portfolio-hero">
        <div class="section-header">
            <div>
                <h2 class="section-title glow-text">{% trans 'Our Works' %}</h2>
                <p class="section-subtitle">{% trans 'Portfolio of unique handmade furniture' %}</p>
            </div>
            <a href="{% url 'client_service:portfolio' %}" class="portfolio-view-all hover-lift">
                <span>{% trans 'View all' %}</span>
                <span class="arrow">‚Üí</span>
            </a>
        </div>

        <!-- Enhanced Portfolio Grid -->
        <div class="portfolio-enhanced-grid" id="portfolioGrid">
            {% for work in works %}
            <article class="portfolio-card" data-category="{{ work.work_type }}">
                <div class="card-image-container">
                    <img src="{{ work.image.url }}" alt="{{ work.title }}" class="portfolio-image{% if work.show_full_image %} full-view{% endif %}" loading="lazy">
                    <div class="image-overlay">
                        <button class="quick-view-btn" onclick="quickView('{{ work.id }}')">
                            <span class="btn-icon">üëÅÔ∏è</span>
                            <span>{% trans 'Quick View' %}</span>
                        </button>
                    </div>
                    <div class="card-badges">
                        <span class="badge badge-category">{{ work.get_work_type_display }}</span>
                        {% if work.is_featured %}
                        <span class="badge badge-featured">‚≠ê {% trans 'Recommended' %}</span>
                        {% endif %}
                    </div>
                </div>

                <div class="card-content">
                    <div class="card-footer">
                        <a href="{% url 'client_service:work_detail' work.id %}" class="view-btn">
                            <span>{% trans 'More details' %}</span>
                            <span class="btn-arrow">‚Üí</span>
                        </a>
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>


        <div class="portfolio-cta">
            <p class="cta-text">{% trans 'Didn\'t find what you were looking for?' %}</p>
            <button class="btn btn-primary" onclick="openConsultationModal()">
                <span class="btn-icon">üí¨</span>
                <span>{% trans 'Discuss individual project' %}</span>
            </button>
        </div>
    </div>
</section>


<section id="stats" class="section container">
    <div class="stats-hero">
        <div class="section-header">
            <div>
                <div class="section-title">{% trans 'About us in numbers' %}</div>
                <div class="section-sub">{% trans 'Facts that clients trust' %}</div>
            </div>
            <div class="stats-badge">
                <span class="badge-icon">üìä</span>
                <span class="badge-text">{% trans 'Verified data' %}</span>
            </div>
        </div>
        {% if stats %}
        <div class="stats-enhanced">
            <div class="stat-card stat-clients">
                <div class="stat-background">
                    <div class="background-pattern"></div>
                </div>
                <div class="stat-content">
                    <div class="stat-data">
                        <div class="num" data-count="{{ stats.clients_count }}">0</div>
                        <div class="num-suffix">+</div>
                    </div>
                    <div class="label">{% trans 'Satisfied clients' %}</div>
                    <div class="stat-description">{% trans 'High trust rating' %}</div>
                    <div class="progress-enhanced">
                        <div class="progress-bar" data-width="95"></div>
                        <div class="progress-glow"></div>
                    </div>
                </div>
                <div class="stat-sparkle">
                    <div class="sparkle sparkle-1"></div>
                    <div class="sparkle sparkle-2"></div>
                    <div class="sparkle sparkle-3"></div>
                </div>
            </div>

            <div class="stat-card stat-projects">
                <div class="stat-background">
                    <div class="background-pattern"></div>
                </div>
                <div class="stat-content">
                    <div class="stat-data">
                        <div class="num" data-count="{{ stats.projects_count }}">0</div>
                        <div class="num-suffix">+</div>
                    </div>
                    <div class="label">{% trans 'Completed projects' %}</div>
                    <div class="stat-description">{% trans 'Unique furniture' %}</div>
                    <div class="progress-enhanced">
                        <div class="progress-bar" data-width="88"></div>
                        <div class="progress-glow"></div>
                    </div>
                </div>
                <div class="stat-sparkle">
                    <div class="sparkle sparkle-1"></div>
                    <div class="sparkle sparkle-2"></div>
                    <div class="sparkle sparkle-3"></div>
                </div>
            </div>

            <div class="stat-card stat-experience">
                <div class="stat-background">
                    <div class="background-pattern"></div>
                </div>
                <div class="stat-content">
                    <div class="stat-data">
                        <div class="num" data-count="{{ stats.years_experience }}">0</div>
                        <div class="num-suffix"></div>
                    </div>
                    <div class="label">{% trans 'Years of experience' %}</div>
                    <div class="stat-description">{% trans 'Professional expertise' %}</div>
                    <div class="progress-enhanced">
                        <div class="progress-bar" data-width="92"></div>
                        <div class="progress-glow"></div>
                    </div>
                </div>
                <div class="stat-sparkle">
                    <div class="sparkle sparkle-1"></div>
                    <div class="sparkle sparkle-2"></div>
                    <div class="sparkle sparkle-3"></div>
                </div>
            </div>

            <div class="stat-card stat-delivery">
                <div class="stat-background">
                    <div class="background-pattern"></div>
                </div>
                <div class="stat-content">
                    <div class="stat-data">
                        <div class="num" data-count="{{ stats.delivery_weeks }}">0</div>
                        <div class="num-suffix"></div>
                    </div>
                    <div class="label">{% trans 'Weeks to delivery' %}</div>
                    <div class="stat-description">{% trans 'Fast implementation' %}</div>
                    <div class="progress-enhanced">
                        <div class="progress-bar" data-width="85"></div>
                        <div class="progress-glow"></div>
                    </div>
                </div>
                <div class="stat-sparkle">
                    <div class="sparkle sparkle-1"></div>
                    <div class="sparkle sparkle-2"></div>
                    <div class="sparkle sparkle-3"></div>
                </div>
            </div>
        </div>

        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="stats-footer">
            <div class="stats-highlight">
                <div class="highlight-item">
                    <span class="highlight-icon">üèÜ</span>
                    <span class="highlight-text">{% trans 'Leader in custom furniture' %}</span>
                </div>
                <div class="highlight-item">
                    <span class="highlight-icon">üíé</span>
                    <span class="highlight-text">{% trans 'Premium quality materials' %}</span>
                </div>
                <div class="highlight-item">
                    <span class="highlight-icon">üéØ</span>
                    <span class="highlight-text">{% trans 'Precise deadlines' %}</span>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</section>


<section id="delivery" class="section container">
    <div class="delivery-hero">
        <div class="delivery-content">
            <div class="section-title">{% trans 'Furniture creation process' %}</div>
            <div class="section-sub">{% trans 'From idea to finished product ‚Äî every stage under control' %}</div>
        </div>
        <div class="process-timeline">
            <div class="process-step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h4>{% trans 'Consultation' %}</h4>
                    <p>{% trans 'We discuss your ideas and requirements' %}</p>
                </div>
            </div>
            <div class="process-step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h4>{% trans 'Design' %}</h4>
                    <p>{% trans 'We create 3D models and drawings' %}</p>
                </div>
            </div>
            <div class="process-step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h4>{% trans 'Production' %}</h4>
                    <p>{% trans 'We manufacture with quality control' %}</p>
                </div>
            </div>
            <div class="process-step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <h4>{% trans 'Delivery' %}</h4>
                    <p>{% trans 'We carefully deliver and install' %}</p>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="container">
    <section id="features" class="section">
        <div class="section-header">
            <h2 class="section-title">{% trans 'Why choose us' %}</h2>
        </div>
        <div class="features">
            <div class="feature">
                <h4>{% trans 'Fast delivery' %}</h4>
                <p>{% trans 'From 2 to 4 weeks ‚Äî we transparently plan deadlines and stick to them. We deliver throughout Russia with careful packaging.' %}</p>
            </div>
            <div class="feature">
                <h4>{% trans 'Quality guarantee' %}</h4>
                <p>{% trans 'Reliable materials, careful assembly and control at every stage. We provide an official warranty on all products.' %}</p>
            </div>
            <div class="feature">
                <h4>{% trans 'Individual approach' %}</h4>
                <p>{% trans 'We will adapt to your style and budget ‚Äî we will offer the best solutions. Free consultations and 3D project visualization.' %}</p>
            </div>
        </div>
    </section>
</div>

<section id="reviews" class="section container reviews">
    <div class="section-header">
        <div>
            <div class="section-title">{% trans 'Customer reviews' %}</div>
            <div class="section-sub">{% trans 'More than 1000 satisfied customers trust us to create dream furniture' %}</div>
        </div>
        <div class="reviews-stats">
            <div class="stat-item">
                <span class="stat-number">{{ avg_rating }}</span>
                <div class="stars-display">
                    {% for i in "12345" %}
                    {% if forloop.counter <= avg_rating %}
                    <span class="star filled">‚òÖ</span>
                    {% else %}
                    <span class="star">‚òÜ</span>
                    {% endif %}
                    {% endfor %}
                </div>
                <span class="stat-label">{% trans 'Average rating' %}</span>
            </div>
        </div>
    </div>

    <div class="reviews-container">
        <div class="reviews-viewport">
            <div class="reviews-track" id="reviewsTrack">
                {% if reviews %}
                {% for review in reviews %}
                <div class="review-card">
                    <div class="review-header">
                        <div class="client-info">
                            <div class="avatar-wrapper">
                                <div class="avatar">
                                    <span class="avatar-initial">{{ review.author_name|first|upper }}</span>
                                </div>
                                <div class="verified-badge" title="{% trans 'Verified client' %}">
                                    <span class="verified-icon">‚úì</span>
                                </div>
                            </div>
                            <div class="client-details">
                                <div class="client-name">{{ review.author_name }}</div>
                                <div class="client-meta">
                                    <span class="date">{{ review.date|date:"d M Y" }}</span>
                                    <span class="separator">‚Ä¢</span>
                                    <span class="client-type">{% trans 'Verified client' %}</span>
                                </div>
                            </div>
                        </div>
                        <div class="review-rating">
                            <div class="stars">
                                {% for i in "12345" %}
                                {% if forloop.counter <= review.rating %}
                                <span class="star filled">‚òÖ</span>
                                {% else %}
                                <span class="star">‚òÜ</span>
                                {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>

                    <div class="review-content">
                        <blockquote class="review-text">"{{ review.text }}"</blockquote>
                        <div class="review-project">
                            <span class="project-label">{% trans 'Project:' %}</span>
                            <span class="project-name">{{ review.project_name|default:"{% trans 'Custom furniture' %}" }}</span>
                        </div>
                    </div>

                    <div class="review-footer">
                        <div class="helpful-section">
                            <button class="helpful-btn" data-review-id="{{ review.id }}">
                                <span class="helpful-icon">üëç</span>
                                <span class="helpful-text">{% trans 'Helpful' %}</span>
                                <span class="helpful-count">({{ review.helpful_count }})</span>
                            </button>
                        </div>
                        <div class="review-source">
                            <span class="source-icon">üè¢</span>
                            <span class="source-text">{% trans 'B\'Mass' %}</span>
                        </div>
                    </div>
                </div>
                {% endfor %}
                {% else %}
                <div class="no-reviews">
                    <div class="no-reviews-icon">üí¨</div>
                    <h3>{% trans 'Reviews will appear soon!' %}</h3>
                    <p>{% trans 'Be the first to leave a review about our work' %}</p>
                    <button class="btn btn-primary" onclick="openConsultationModal()">
                        {% trans 'Order project' %}
                    </button>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –∫–∞—Ä—É—Å–µ–ª–∏ -->


        <div class="reviews-navigation">
            <button class="nav-btn prev-btn" id="reviewsPrev" aria-label="{% trans 'Previous review' %}">
                <span class="nav-icon">‚Äπ</span>
            </button>
            <div class="reviews-dots" id="reviewsDots"></div>
            <button class="nav-btn next-btn" id="reviewsNext" aria-label="{% trans 'Next review' %}">
                <span class="nav-icon">‚Ä∫</span>
            </button>
        </div>
    </div>

    <!-- –ü—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é -->
    <div class="reviews-cta">
        <div class="cta-content">
            <h3 class="cta-title">{% trans 'Want to join satisfied customers?' %}</h3>
            <p class="cta-description">{% trans 'Get a free consultation and find out how we can make your dream of perfect furniture come true' %}</p>
            <div class="cta-actions">
                <button class="btn btn-primary" onclick="openConsultationModal()">
                    <span class="btn-icon">üìû</span>
                    <span>{% trans 'Get consultation' %}</span>
                </button>
                <a href="{% url 'client_service:portfolio' %}" class="btn btn-outline">
                    <span>{% trans 'View our works' %}</span>
                    <span class="btn-arrow">‚Üí</span>
                </a>
            </div>
        </div>
        <div class="cta-visual">
            <div class="trust-indicators">
                <div class="trust-item">
                    <span class="trust-icon">üèÜ</span>
                    <span class="trust-text">{{ total_projects }}+ {% trans 'projects' %}</span>
                </div>
                <div class="trust-item">
                    <span class="trust-icon">‚≠ê</span>
                    <span class="trust-text">{{ avg_rating }} {% trans 'rating' %}</span>
                </div>
                <div class="trust-item">
                    <span class="trust-icon">üõ°Ô∏è</span>
                    <span class="trust-text">{% trans 'Quality guarantee' %}</span>
                </div>
            </div>
        </div>
    </div>
</section>

{% include "partials/contacts_section.html" %}

{% endblock %}
